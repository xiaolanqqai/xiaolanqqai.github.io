<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>内容管理系统 - Xiaolan</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/index.css">
    <style>
        .cms-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .cms-sidebar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        .cms-content {
            margin-left: 280px;
            padding: 20px;
            min-height: 100vh;
            background: #f8f9fa;
        }
        .nav-link {
            border-radius: 10px;
            margin: 5px 10px;
            transition: all 0.3s ease;
        }
        .nav-link.active {
            background: #007bff;
            color: white !important;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .btn-primary {
            background: linear-gradient(45deg, #007bff, #0056b3);
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div class="cms-container">
        <!-- 侧边栏 -->
        <div class="cms-sidebar">
            <div class="p-4">
                <h4 class="text-center mb-4">内容管理系统</h4>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#navManager" data-tab="navManager">
                            📋 导航管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#volManager" data-tab="volManager">
                            🔄 版本管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#mmGenerator" data-tab="mmGenerator">
                            🎨 MM生成器
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#systemInfo" data-tab="systemInfo">
                            📊 系统信息
                        </a>
                    </li>
                    <li class="nav-item mt-4">
                        <a class="nav-link btn btn-outline-primary" href="index.html">
                            🏠 返回首页
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- 主内容区域 -->
        <div class="cms-content">
            <!-- 导航管理 -->
            <div id="navManager" class="tab-pane active">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>导航管理</h3>
                    <button class="btn btn-success" onclick="addNewNav()">+ 添加导航</button>
                </div>
                <iframe src="index/manager/nav-manager.html" width="100%" height="600" style="border: none; border-radius: 10px;"></iframe>
            </div>

            <!-- 版本管理 -->
            <div id="volManager" class="tab-pane">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>版本管理</h3>
                    <button class="btn btn-info" onclick="checkUpdates()">🔄 检查更新</button>
                </div>
                <iframe src="index/manager/vol-manager.html" width="100%" height="600" style="border: none; border-radius: 10px;"></iframe>
            </div>

            <!-- MM生成器 -->
            <div id="mmGenerator" class="tab-pane">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>MM生成器</h3>
                    <button class="btn btn-warning" onclick="generateMM()">✨ 生成MM</button>
                </div>
                <iframe src="index/manager/MM-generator.html" width="100%" height="600" style="border: none; border-radius: 10px;"></iframe>
            </div>

            <!-- 系统信息 -->
            <div id="systemInfo" class="tab-pane">
                <h3 class="mb-4">系统信息</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">📈 性能统计</h5>
                                <div id="performanceStats">
                                    <p>页面加载时间: <span id="loadTime">计算中...</span></p>
                                    <p>内存使用: <span id="memoryUsage">计算中...</span></p>
                                    <p>资源数量: <span id="resourceCount">计算中...</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">⚙️ 系统状态</h5>
                                <div id="systemStatus">
                                    <p>浏览器: <span id="browserInfo">检测中...</span></p>
                                    <p>屏幕分辨率: <span id="screenResolution">检测中...</span></p>
                                    <p>在线状态: <span id="onlineStatus">检测中...</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mt-4">
                    <div class="card-body">
                        <h5 class="card-title">🔧 快速操作</h5>
                        <div class="btn-group">
                            <button class="btn btn-outline-primary" onclick="clearCache()">清理缓存</button>
                            <button class="btn btn-outline-success" onclick="exportData()">导出数据</button>
                            <button class="btn btn-outline-warning" onclick="refreshAll()">刷新所有</button>
                            <button class="btn btn-outline-danger" onclick="resetSystem()">重置系统</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script>
        // 标签页切换
        document.querySelectorAll('.nav-link[data-tab]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 移除所有active类
                document.querySelectorAll('.nav-link').forEach(nav => nav.classList.remove('active'));
                document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
                
                // 添加active类
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                // 如果是系统信息标签，更新信息
                if (tabId === 'systemInfo') {
                    updateSystemInfo();
                }
            });
        });

        // 更新系统信息
        function updateSystemInfo() {
            // 性能统计
            const loadTime = performance.now().toFixed(2);
            document.getElementById('loadTime').textContent = loadTime + 'ms';
            
            // 内存使用（近似值）
            if (performance.memory) {
                const memory = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
                document.getElementById('memoryUsage').textContent = memory + 'MB';
            }
            
            // 资源数量
            const resources = performance.getEntriesByType('resource').length;
            document.getElementById('resourceCount').textContent = resources;
            
            // 浏览器信息
            document.getElementById('browserInfo').textContent = navigator.userAgent.split(' ')[0];
            
            // 屏幕分辨率
            document.getElementById('screenResolution').textContent = 
                screen.width + 'x' + screen.height;
            
            // 在线状态
            document.getElementById('onlineStatus').textContent = 
                navigator.onLine ? '在线' : '离线';
        }

        // 系统功能函数
        function addNewNav() {
            alert('添加新导航功能');
        }

        function checkUpdates() {
            alert('检查更新功能');
        }

        function generateMM() {
            alert('生成MM功能');
        }

        function clearCache() {
            if (confirm('确定要清理缓存吗？')) {
                localStorage.clear();
                sessionStorage.clear();
                alert('缓存清理完成！');
            }
        }

        function exportData() {
            alert('数据导出功能');
        }

        function refreshAll() {
            location.reload();
        }

        function resetSystem() {
            if (confirm('确定要重置系统吗？这将清除所有数据！')) {
                localStorage.clear();
                alert('系统重置完成！');
            }
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateSystemInfo();
            
            // 监听在线状态变化
            window.addEventListener('online', () => {
                document.getElementById('onlineStatus').textContent = '在线';
            });
            window.addEventListener('offline', () => {
                document.getElementById('onlineStatus').textContent = '离线';
            });
        });
    </script>
</body>
</html>